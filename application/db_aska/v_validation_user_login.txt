-- db_aska.v_validation_user_login source

create or replace
algorithm = UNDEFINED view `db_aska`.`v_validation_user_login` as
select
    `a`.`user` as `user`,
    ifnull(`c`.`nama`, `a`.`user`) as `full_name`,
    `a`.`pass` as `pass`,
    `a`.`tgl_terakhir_login` as `tgl_terakhir_login`,
    `d`.`status` as `role_name`
from
    (((`db_aska`.`z_user` `a`
left join `db_aska`.`roles` `b` on
    (`a`.`r_user` = `b`.`role_id`))
left join `db_aska`.`a_pegawai` `c` on
    (`a`.`IDPEG` = `c`.`IDPEG`))
left join `db_aska`.`r_user` `d` on
    (`a`.`r_user` = `d`.`level`));