var table_referensi_cuti;function table_refCuti(){var a;a=baseURL+"get_referensi_cuti",table_referensi_cuti=$("#dt_referensi_cuti").DataTable({destroy:!0,iDisplayLength:10,processing:!0,searching:!0,ajax:{url:a,type:"GET"},language:{processing:'<div class="loader"><div class="m-t-30"><img class="zmdi-hc-spin" src="'+baseURL+'assets/template/images/loader.svg" width="48" height="48" alt="Aero"></div><p>Processing...</p></div>'}})}function btnSaveData(){Swal.fire({title:"anda yakin ingin menyimpan data ini ?",text:"status "+$("#status").val(),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then((a=>{if(a.isConfirmed){var t=baseURL+"save_referensi_cuti",e=$.param({ajaxID:$("#ID").val(),ajaxStatus:$("#status").val(),ajaxJatah:$("#jatah").val()});$.ajax({url:t,type:"POST",data:e,dataType:"JSON",success:function(a){1==a.statusInsertToDb?Swal.fire({title:"Success",text:"ID "+$("#ID").val()+" berhasil disimpan",icon:"success"}).then((function(){table_referensi_cuti.ajax.reload(),$("#ID,#status,#jatah").val("")})):2==a.statusInsertToDb?Swal.fire({title:"Failed",text:"data ID "+$("#ID").val()+" sudah ada",icon:"error"}):(Swal.fire({title:"Failed",text:"data ID "+$("#ID").val()+" tidak berhasil disimpan",icon:"error"}),table_referensi_cuti.ajax.reload())},error:function(a,t,e){Swal.fire({title:"Failed",text:"data ID "+$("#ID").val()+" tidak berhasil disimpan",icon:"error"}),table_referensi_cuti.ajax.reload()}})}}))}function btnUpdateData(){Swal.fire({title:"anda yakin ingin menyimpan perubahan data ini ?",text:"status "+$("#status").val(),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then((a=>{if(a.isConfirmed){$("#btnUpdate").hide(),$("#btnCancel").hide(),$("#btnSubmit").show(),$("#btnReset").show();var t=baseURL+"update_referensi_cuti",e=$.param({ajaxID:$("#ID").val(),ajaxStatus:$("#status").val(),ajaxJatah:$("#jatah").val()});$.ajax({url:t,type:"POST",data:e,dataType:"JSON",success:function(a){1==a.statusUpdateToDb?Swal.fire({title:"Success",text:"ID "+$("#ID").val()+" berhasil diubah",icon:"success"}).then((function(){table_referensi_cuti.ajax.reload(),$("#ID,#status,#jatah").val("")})):(Swal.fire({title:"Failed",text:"data ID "+$("#ID").val()+" tidak berhasil diubah",icon:"error"}),table_referensi_cuti.ajax.reload())},error:function(a,t,e){Swal.fire({title:"Failed",text:"data ID "+$("#ID").val()+" tidak berhasil diubah",icon:"error"}),table_referensi_cuti.ajax.reload()}})}}))}function confirmDeleteData(a){Swal.fire({title:"anda yakin ingin menghapus data ini ?",text:"ID "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then((t=>{if(t.isConfirmed){var e=baseURL+"delete_referensi_cuti",i=$.param({ajaxID:a});$.ajax({url:e,type:"POST",data:i,dataType:"JSON",success:function(t){1==t.statusDeleteToDb?Swal.fire({title:"Success",text:"ID "+a+" berhasil dihapus",icon:"success"}).then((function(){table_referensi_cuti.ajax.reload()})):(Swal.fire({title:"Failed",text:"data ID "+a+" tidak berhasil dihapus",icon:"error"}),table_referensi_cuti.ajax.reload())},error:function(t,e,i){Swal.fire({title:"Failed",text:"data ID "+a+" tidak berhasil dihapus",icon:"error"}),table_referensi_cuti.ajax.reload()}})}}))}function confirmUpdateData(a){Swal.fire({title:"anda yakin ingin merubah data ini ?",text:"ID "+a,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then((t=>{if(t.isConfirmed){$("#btnUpdate").show(),$("#btnCancel").show(),$("#btnSubmit").hide(),$("#btnReset").hide(),$("#ID").prop("disabled",!0);var e=baseURL+"get_forupdate_referensi_cuti",i={ajaxID:a};$.getJSON(e,i).done((function(a){$("#ID").val(a.ID),$("#status").val(a.status),$("#jatah").val(a.jatah)})).fail((function(a,t,e){alert("Request DataFailed : "+(t+", "+e))}))}}))}function validationForm(a,t,e,i){return""==$(a).val()?($(t).css({border:"1px solid red",color:"red"}),$(a).addClass("form-control-danger"),$(e).html(i+" harus diisi"),"noValid"):($(t).css({border:"0px solid red",color:"red"}),$(a).removeClass("form-control-danger"),$(e).html(""),"Valid")}$((function(){table_refCuti()})),$("#btnReset").click((function(){$("#btnCancel").click()})),$("#btnCancel").click((function(){$("#btnUpdate,#btnCancel").hide(),$("#ID").prop("disabled",!1),$("#btnSubmit,#btnReset").show(),$("#ID,#status,#jatah").val("")})),$("#btnSubmit").click((function(){validationFormValid=[],statusValidID=validationForm("#ID","#boxIconID","#msgErrID","ID"),statusValidStatus=validationForm("#status","#boxIconStatus","#msgErrStatus","status"),statusValidJatah=validationForm("#jatah","#boxIconJatah","#msgErrJatah","jatah"),validationFormValid.push(statusValidID,statusValidStatus,statusValidJatah),validationFormValid.indexOf("noValid")>-1||btnSaveData()})),$("#btnUpdate").click((function(){validationFormValid=[],statusValidID=validationForm("#ID","#boxIconID","#msgErrID","ID"),statusValidStatus=validationForm("#status","#boxIconStatus","#msgErrStatus","status"),statusValidJatah=validationForm("#jatah","#boxIconJatah","#msgErrJatah","jatah"),validationFormValid.push(statusValidID,statusValidStatus,statusValidJatah),validationFormValid.indexOf("noValid")>-1||btnUpdateData()}));